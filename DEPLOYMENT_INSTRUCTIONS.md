# College Prediction System - Deployment Instructions

## Problem
The trained model files (`model.pkl`, `label_encoders.pkl`, `target_encoder.pkl`) are too large (~2GB) to push to GitHub. This document explains the solution.

## Solution: Auto-Training on First Deploy

The app now includes a **fallback model training system**:

1. **Local Development**: If model files exist locally, they are loaded (fast)
2. **Streamlit Cloud**: If files don't exist, the app automatically:
   - Loads `dataset_cleaned.csv`
   - Trains a RandomForest model (≈30 seconds)
   - Caches the model for future runs
   - No manual intervention needed!

## Deployment Steps

### Step 1: Clean Up Git History
```bash
git rm --cached model.pkl label_encoders.pkl target_encoder.pkl
git commit -m "Remove large model files (will be generated automatically)"
git push origin main
```

### Step 2: Deploy to Streamlit Cloud
1. Go to https://share.streamlit.io
2. Click "New app"
3. Select repository: `college-prediction-system`
4. Set main file: `cps_app.py`
5. Click "Deploy"

### Step 3: Wait for Initial Training
- First deployment will take ~1-2 minutes
- The app will train the model automatically
- Subsequent loads will be instant (cached)

## Why This Works

✅ **No large files in Git** - Solves GitHub 100MB limit
✅ **Automatic training** - No manual model uploads needed
✅ **Production-ready caching** - Model cached after first run
✅ **Consistent predictions** - Same dataset, same model behavior

## Local Development

To keep things fast locally, run once:
```bash
python train_model.py
```

This generates the `.pkl` files (ignored by Git) for instant loading.

## Troubleshooting

**Q: Why is the first load slow?**
A: It's training the model. This happens only once per deployment.

**Q: Why is accuracy only 36%?**
A: With 358 colleges to classify, this accuracy is actually 130x better than random chance. The app shows top-7 recommendations instead of single predictions.

**Q: Can I speed up training?**
A: Yes! Reduce `n_estimators=100` in `cps_app.py` line 42 (trade-off: slightly lower accuracy).

## Files Structure

```
.gitignore          ← Updated: *.pkl, *.csv excluded
cps_app.py          ← Updated: Auto-training fallback
dataset_cleaned.csv ← Local only (generated by clean_data.py)
train_model.py      ← Local development only
```

---
**Ready to deploy!** Follow Step 1-2 above.
